Version 4
SHEET 1 1072 680
WIRE -1088 -208 -1184 -208
WIRE -864 -208 -1024 -208
WIRE -992 -144 -1024 -144
WIRE -864 -144 -864 -208
WIRE -864 -144 -912 -144
WIRE 544 -96 80 -96
WIRE -352 -64 -464 -64
WIRE -144 -64 -272 -64
WIRE -1296 -48 -1344 -48
WIRE -1184 -48 -1184 -208
WIRE -1184 -48 -1216 -48
WIRE -1104 -48 -1184 -48
WIRE -1024 -48 -1024 -144
WIRE -1024 -48 -1040 -48
WIRE -976 -48 -1024 -48
WIRE -1184 -32 -1184 -48
WIRE -864 -32 -864 -144
WIRE -864 -32 -912 -32
WIRE -608 -32 -864 -32
WIRE 464 -32 128 -32
WIRE -976 -16 -992 -16
WIRE -864 0 -864 -32
WIRE 128 32 128 -32
WIRE 160 32 128 32
WIRE -528 48 -528 -32
WIRE -464 48 -464 -64
WIRE -464 48 -528 48
WIRE -352 48 -464 48
WIRE 304 48 224 48
WIRE 464 48 464 -32
WIRE 464 48 368 48
WIRE 544 48 464 48
WIRE 592 48 544 48
WIRE -144 64 -144 -64
WIRE -144 64 -288 64
WIRE -48 64 -144 64
WIRE 80 64 80 -96
WIRE 80 64 16 64
WIRE 160 64 80 64
WIRE -1184 80 -1184 48
WIRE -352 80 -368 80
WIRE 464 80 464 48
WIRE -1344 112 -1344 -48
WIRE -1344 112 -1568 112
WIRE 80 112 80 64
WIRE -144 144 -144 64
WIRE 544 144 544 128
WIRE 656 144 544 144
WIRE 752 144 656 144
WIRE -1088 160 -1184 160
WIRE -864 160 -1024 160
WIRE -528 160 -528 48
WIRE 544 176 544 144
WIRE 656 176 656 144
WIRE 464 192 464 144
WIRE -992 224 -1024 224
WIRE -864 224 -864 160
WIRE -864 224 -912 224
WIRE 80 240 80 192
WIRE 656 256 656 240
WIRE -1344 320 -1344 112
WIRE -1296 320 -1344 320
WIRE -1184 320 -1184 160
WIRE -1184 320 -1216 320
WIRE -1104 320 -1184 320
WIRE -1024 320 -1024 224
WIRE -1024 320 -1040 320
WIRE -976 320 -1024 320
WIRE -1184 336 -1184 320
WIRE -864 336 -864 224
WIRE -864 336 -912 336
WIRE -608 336 -608 160
WIRE -608 336 -864 336
WIRE -976 352 -992 352
WIRE -864 384 -864 336
WIRE -1184 448 -1184 416
FLAG -944 -64 0
FLAG -944 0 Vdd
IOPIN -944 0 In
FLAG -1184 80 0
FLAG -944 304 0
FLAG -944 368 Vdd
IOPIN -944 368 In
FLAG -1184 448 0
FLAG -1568 192 0
FLAG -992 352 Vcm
IOPIN -992 352 In
FLAG -992 -16 Vcm
IOPIN -992 -16 In
FLAG -1872 192 0
FLAG -1968 192 0
FLAG -1968 112 Vcm
IOPIN -1968 112 In
FLAG -1872 112 Vdd
IOPIN -1872 112 In
FLAG 80 240 0
FLAG -368 80 Vcm
IOPIN -368 80 In
FLAG 192 16 0
FLAG 192 80 Vdd
IOPIN 192 80 In
FLAG -320 32 0
FLAG -320 96 Vdd
IOPIN -320 96 In
FLAG 464 192 0
FLAG 544 256 0
FLAG 656 256 0
FLAG 752 144 Vref
IOPIN 752 144 Out
FLAG -144 144 Vadd
IOPIN -144 144 Out
FLAG -864 0 Vin_1
IOPIN -864 0 In
FLAG -864 384 Vin_2
IOPIN -864 384 In
FLAG 592 48 Vpeak
IOPIN 592 48 Out
FLAG 544 -96 Vin_ac
IOPIN 544 -96 Out
SYMBOL MCP6001 -944 -32 M180
SYMATTR InstName U1
SYMBOL cap -1040 -32 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value {Ca}
SYMBOL cap -1024 -192 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C2
SYMATTR Value {Ca}
SYMBOL res -896 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {R22a}
SYMBOL res -1200 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {R11a}
SYMBOL res -1200 -48 R0
SYMATTR InstName R3
SYMATTR Value {R33a}
SYMBOL MCP6001 -944 336 M180
SYMATTR InstName U2
SYMBOL cap -1040 336 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value {Cb}
SYMBOL cap -1024 176 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C4
SYMATTR Value {Cb}
SYMBOL res -896 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {R22b}
SYMBOL res -1200 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R11b}
SYMBOL res -1200 320 R0
SYMATTR InstName R6
SYMATTR Value {R33b}
SYMBOL voltage -1568 96 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 0.45 3k)
SYMBOL voltage -1872 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -1968 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 2.5
SYMBOL MCP6001 -320 64 M180
SYMATTR InstName U3
SYMBOL res -512 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res -512 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL res -256 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL cap 16 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 100n
SYMBOL MCP6001 192 48 M180
SYMATTR InstName U4
SYMBOL res 64 96 R0
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL diode 304 64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 448 80 R0
SYMATTR InstName C6
SYMATTR Value 100n
SYMBOL res 528 32 R0
SYMATTR InstName R11
SYMATTR Value 16k
SYMBOL res 528 160 R0
SYMATTR InstName R12
SYMATTR Value 31k
SYMBOL cap 640 176 R0
SYMATTR InstName C7
SYMATTR Value 1µ
TEXT -2112 352 Left 2 !.param Ra = 1k\n.param R33a = Ra\n.param R22a = 398*Ra\n.param R11a = 199*Ra\n.param Ca = 1/(199*2*pi*100*Ra)\n \n.param Rb = 1k\n.param R33b = Rb\n.param R22b = 398*Rb\n.param R11b = 199*Rb\n.param Cb = 1/(199*2*pi*300*Rb)
TEXT -1616 416 Left 2 !.tran 250m
